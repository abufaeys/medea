<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <title>Medea's e2e test</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/6.2.0/mocha.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/6.2.0/mocha.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chai/4.2.0/chai.js"></script>
    <script src="/e2e-tests/helpers/base.js"></script>
    <script type="module">
        import init, {Jason} from "/jason-pkg/jason.js";

        async function getJason() {
            await init();
            return new Jason()
        }

        window.getJason = getJason;
    </script>
</head>

<body>
<div id="mocha"></div>
<script>
    // This is needed for retrieving mocha results from e2e-test-runner
    console.stdlog = console.log.bind(console);
    console.logs = [];
    console.log = function(){
        console.logs.push(Array.from(arguments));
        console.stdlog.apply(console, arguments);
    };

    mocha.setup({
        ui: 'bdd',
        reporter: 'json'
    });

    // root after() for signal for test-runner that tests done.
    after(() => {
        let successEl = document.createElement('div');
        successEl.id = 'test-end';
        document.body.appendChild(successEl);
    });
</script>

<!--Test file including-->
<script src="/e2e-tests/{{{}}}"></script>

<script>
    mocha.run();
</script>
</body>

</html>
